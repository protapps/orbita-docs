---
title: 'Documenta√ß√£o API'
description: 'API de Pagamentos - Documenta√ß√£o completa'
---

# üì± API de Pagamentos - Documenta√ß√£o

## Vis√£o Geral

A API de pagamentos do Orbita permite processar pagamentos atrav√©s de m√∫ltiplos m√©todos: **PIX**, **Boleto** e **Cart√£o de Cr√©dito**. O sistema suporta diferentes adquirentes e oferece webhooks para notifica√ß√µes de status.

---

## üîó Endpoint Principal

### **POST** `/pay/payments`

Inicializa um novo pagamento. API_KEY gerada dentro da plataforma em https://app-v2.orbitapay.com.br/apps

**Headers Obrigat√≥rios:**

```
Content-Type: application/json
Authorization: Bearer {API_KEY}
```

---

## ‚úÖ Campos Obrigat√≥rios e Opcionais

### Obrigat√≥rios

- `paymentMethod` - M√©todo de pagamento
- `amount` - Valor em centavos (ex: 10000 = R$ 100,00)
- `currency` - Moeda (sempre "BRL")
- `paymentDetails` - Dados do pagador
    - `firstName` - Nome
    - `lastName` - Sobrenome
    - `document` - CPF/CNPJ
    - `documentType` - Tipo do documento
    - `email` - E-mail
    - `phoneNumber` - Telefone
    - `address` - Endere√ßo completo

### Opcionais

- `userId` - ID do usu√°rio
- `transactionId` - ID da transa√ß√£o (gerado automaticamente se n√£o informado)
- `shipping.fee` - Taxa de envio
- `items` - Lista de itens/produtos
- `postbackUrl` - URL para receber webhooks
- `affiliateId` - ID do afiliado
- `planId` - ID do plano

### Condicionalmente Obrigat√≥rios

- `installments` e `creditCard` - Obrigat√≥rios quando `paymentMethod = "credit_card"`

---

## üîî Webhooks

O sistema envia webhooks para `postbackUrl` quando o status da transa√ß√£o muda. O webhook cont√©m `transactionId` e o novo `status`.

### Status Poss√≠veis

| Status | Descri√ß√£o |
| --- | --- |
| `initial` | Transa√ß√£o iniciada |
| `pending` | Aguardando pagamento |
| `approved` | Pagamento aprovado |
| `declined` | Pagamento recusado |
| `refund` | Estorno processado |
| `chargeback` | Chargeback realizado |
| `expired` | Pagamento expirado |
| `paid` | Pagamento confirmado |
| `cancelled` | Pagamento cancelado |

---

## üîÑ Fluxo de Pagamento

### 1. Inicializa√ß√£o

- **POST** `/pay/payments` com dados do pagamento
- Sistema valida dados e cria transa√ß√£o
- Retorna informa√ß√µes espec√≠ficas do m√©todo escolhido

### 2. Processamento

- **PIX**: Gera QR Code e c√≥digo PIX para pagamento
- **Boleto**: Gera c√≥digo de barras do boleto
- **Cart√£o**: Processa pagamento imediatamente

### 3. Notifica√ß√£o

- Sistema envia webhook para `postbackUrl` quando status muda
- Webhook cont√©m `transactionId` e novo `status`

---

## ‚ö†Ô∏è C√≥digos de Erro

| C√≥digo | Descri√ß√£o |
| --- | --- |
| `400` | Dados inv√°lidos na requisi√ß√£o |
| `401` | API Key inv√°lida ou ausente |
| `422` | Erro de valida√ß√£o dos dados |
| `500` | Erro interno do servidor |

---

## üîß Configura√ß√£o de Webhook

Para receber notifica√ß√µes de mudan√ßa de status:

1. Configure uma URL que aceite **POST** requests
2. Inclua `postbackUrl` na requisi√ß√£o de pagamento
3. Processe o payload JSON recebido
4. Retorne status HTTP **200** para confirmar recebimento

---

## üìù Observa√ß√µes Importantes

- **Valores**: Sempre informar em centavos (ex: R$ 100,00 = 10000)
- **Telefone**: Apenas n√∫meros, sem formata√ß√£o
- **Documentos**: CPF com 11 d√≠gitos, CNPJ com 14 d√≠gitos

---

## Autentica√ß√£o

Todos os tokens de autentica√ß√£o s√£o gerados na plataforma em https://app-v2.orbitapay.com.br/apps

