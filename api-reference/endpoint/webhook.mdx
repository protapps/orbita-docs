---
title: 'Webhooks de Pagamento'
openapi: 'WEBHOOK /pay/webhook'
---

## üîî Estrutura do Webhook

O sistema envia webhooks para a `postbackUrl` configurada na requisi√ß√£o de pagamento sempre que o status da transa√ß√£o muda.

### Payload do Webhook

<ParamField body="transactionId" type="string" required>
  ID √∫nico da transa√ß√£o
</ParamField>

<ParamField body="status" type="string" required>
  Novo status da transa√ß√£o
</ParamField>

### Exemplo de Payload

```json
{
  "transactionId": "14d486a6-7c9d-4e75-919c-b0a2d1bf49ae",
  "status": "approved"
}
```

---

## üìä Status Poss√≠veis

| Status | Descri√ß√£o |
| --- | --- |
| `initial` | Transa√ß√£o iniciada |
| `pending` | Aguardando pagamento |
| `approved` | Pagamento aprovado |
| `declined` | Pagamento recusado |
| `refund` | Estorno processado |
| `chargeback` | Chargeback realizado |
| `expired` | Pagamento expirado |
| `paid` | Pagamento confirmado |
| `cancelled` | Pagamento cancelado |

---

## üîß Configura√ß√£o

Para receber notifica√ß√µes de mudan√ßa de status:

1. Configure uma URL que aceite **POST** requests
2. Inclua `postbackUrl` na requisi√ß√£o de pagamento
3. Processe o payload JSON recebido
4. Retorne status HTTP **200** para confirmar recebimento

### Exemplo de Endpoint de Webhook

```javascript
// Exemplo em Node.js/Express
app.post('/webhook', (req, res) => {
  const { transactionId, status } = req.body;
  
  // Processar a mudan√ßa de status
  console.log(`Transa√ß√£o ${transactionId} mudou para status: ${status}`);
  
  // Atualizar status no banco de dados
  // Enviar notifica√ß√£o ao usu√°rio
  // etc.
  
  // Sempre retornar 200 para confirmar recebimento
  res.status(200).json({ received: true });
});
```

---

## ‚ö†Ô∏è Importante

- O webhook ser√° enviado sempre que o status da transa√ß√£o mudar
- Voc√™ deve retornar HTTP 200 para confirmar o recebimento
- Em caso de falha (timeout ou erro), o sistema pode tentar reenviar o webhook
- Recomenda-se implementar idempot√™ncia no processamento dos webhooks
